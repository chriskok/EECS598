<!DOCTYPE html>
<html>
    <style type="text/css">
    fieldset {
        padding: 10px;
        background: #fbfbfb;
        border-radius: 5px;
        margin-bottom: 5px;
    }
    </style>

    <head>
    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
    <script type='text/javascript' src='https://s3.amazonaws.com/mturk-public/externalHIT_v1.js'></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.3.js"></script>
    </head>
    <body>
        <div class="container">
            <!-- Instructions (collapsible) -->
            <div class="row">
                <div class="col-xs-12 col-md-12">
                    <div class="panel panel-primary"><!-- WARNING: the ids "collapseTrigger" and "instructionBody" are being used to enable expand/collapse feature -->
                        <h2>Sentiment Analysis Task</h2> 
                        <br>
                        <a class="panel-heading" href="javascript:void(0);" id="collapseTrigger">
                            <button type="button" class="btn btn-info">Instructions</button>
                        </a>
                        <div class="panel-body" id="instructionBody" style="display: none;"><strong>Pick the best sentiment based on the following criterion:</strong>
                            <table class="table table-condensed table-striped table-responsive">
                                <tbody>
                                </tbody>
                                <colgroup>
                                    <col class="col-xs-2 col-md-2">
                                    <col class="col-xs-4 col-md-4">
                                    <col class="col-xs-6 col-md-6">
                                </colgroup>
                                <!-- By explaining the sentiment scale, the accuracy of the answers may increase. -->
                                <tbody>
                                <tr>
                                    <th>Sentiment</th>
                                    <th>Guidance</th>
                                    <th>Example</th>
                                </tr>
                                <tr>
                                    <td>Strongly negative</td>
                                    <td>Select this if the item embodies negative emotion toward the topic that can be perceived as extreme.</td>
                                    <td>"I hate grocery shopping in general but I swear I'm doing it online next shop, can not deal with the swathes of panic buyers at all! #COVID?19 #coronavirus #coronavirusuk #anxiety #panicbuyinguk #morons"</td>
                                </tr>
                                <tr>
                                    <td>Neutral</td>
                                    <td>Select this if the item does not embody much of positive or negative emotion toward the topic.</td>
                                    <td>"Went to the supermarket yesterday and the toilet paper was gone. Has this anything to do with the Corona virus? #COVID2019"</td>
                                </tr>
                                <tr>
                                    <td>Strongly positive</td>
                                    <td>Select this if the item embodies emotion that was extremely happy or excited toward the topic.</td>
                                    <td>""We have AMAZING CHEAP DEALS! FOR THE #COVID2019 going on to help you???"</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <br>

            <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Coronavirus-related tweet</h5>
                  <p class="card-text">${content}</p>
                </div>
            </div>

            <br>
            
            <form name='mturk_form' method='post' id='mturk_form' action='https://www.mturk.com/mturk/externalSubmit'>
                <input type='hidden' value='' name='assignmentId' id='assignmentId'/>
                <!-- <p>Tweet: {content}</p> -->
                
                <div class="form-group">
                    <label for="sentiment_selection">Select sentiment:</label>
                    <select name='sentiment_selection' class="form-control" id="sentiment_selection">
                        <option>Extremely Negative</option>
                        <option>Negative</option>
                        <option>Neutral</option>
                        <option>Positive</option>
                        <option>Extremely Positive</option>
                    </select>
                </div>

                <p><input type='submit' class="btn btn-primary" id='submitButton' value='Submit' /></p>
            </form> 
        </div>
        
        <script language='Javascript'>turkSetAssignmentID();</script>
        <script>
            $(document).ready(function() {
                // Instructions expand/collapse
                var content = $('#instructionBody');
                var trigger = $('#collapseTrigger');
                content.hide();
                $('.collapse-text').text('(Click for instructions)');
                trigger.click(function(){
                    content.toggle();
                    var isVisible = content.is(':visible');
                    if(isVisible){
                        $('.collapse-text').text('(Click to collapse)');
                    }else{
                        $('.collapse-text').text('(Click for instructions)');
                    }
                });
                // end expand/collapse
    
                // highlight selected category
                var inputs = $("#Inputs input:radio");
                inputs.change(function(){
                    inputs.parent().removeClass("btn-success");
                    inputs.parent().addClass("btn-default");
                    if($(this).is(":checked")){
                        $(this).parent().removeClass("btn-default");
                        $(this).parent().addClass("btn-success");
                    }else{
                        $(this).parent().removeClass("btn-success");
                        $(this).parent().addClass("btn-default");
                    }
                });
                // end highlight
            });
        </script>
    </body>
</html>